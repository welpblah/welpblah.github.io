<!DOCTYPE html>
<html lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <meta name="color-scheme" content="light dark">
  <meta name="description" content="a personal website">
  <meta property="og:title" content="sunrash">
  <meta property="og:description" content="a personal website">
  <meta property="og:image" content="/assets/images/odilon-redon.jpg">
  <link rel="stylesheet" href="/fonts.css">
  <link rel="stylesheet" href="/style.css">
  <title>
   producing an ebook with standard ebooks — sunrash
  </title>
 </head>
 <body>
  <header>
   <nav>
    <a href="/">about</a>
    <a class="nav-active" href="/blog">blog</a>
    <a href="/uses">uses</a>
    <a href="/reading">reading</a>
   </nav>
  </header>
  <main>
   <div id="post-header">
    <h1 id="post-title">
     producing an ebook with standard ebooks
    </h1>
    <div>
     <strong>last update:</strong> <time id="post-date" datetime="2024-10-23">2024-10-23</time>
    </div>
    <div class="post-tags">
     <span><strong>tags:</strong> </span><a href="/blog/tag/ebooks"><span class="post-tag">ebooks</span></a>
    </div>
    <div>
     <strong>reading time:</strong> <span id="reading-time">less than a minute</span>
    </div>
   </div>
   <p>
    Having already set my eyes on the beginner-friendly book I would like
to produce, <em>The House at Pooh Corner</em> by A. A. Milne, the first
course of action is to setup the Standard Ebooks toolset.
   </p>
   <p>
    I had <code>pipx</code> (purpose: execute binaries from Python
packages in isolated environments) installed when I had a
<code>brew</code> configuration but since I use <code>ports</code> now,
I need to install it again:
   </p>
   <div class="sourceCode" id="cb1">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> port install pipx</span></code></pre>
   </div>
   <p>
    I’m prompted for a password - no surprise there, I’m using
<code>sudo</code> after all. The <code>pipx</code> package itself comes
with dependencies that need to be also be installed:
<code>pip_select</code>, <code>py312-argcomplete</code>,
<code>py312-click</code>, <code>py312-packaging</code>,
<code>py312-pip</code>, <code>py312-platformdirs</code>,
<code>py312-setuptools</code>, and <code>py312-userpath</code>.
   </p>
   <p>
    Clean installation. I did have this note:
   </p>
   <div class="sourceCode" id="cb2">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Some</span> of the ports you installed have notes:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">py312-pip</span> has the following notes:</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">To</span> make the Python 3.12 version of pip the one</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">that</span> is run when you execute the commands</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">without</span> a version suffix, e.g. <span class="st">'pip'</span>, run:</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> port select <span class="at">--set</span> pip pip312</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> port select <span class="at">--set</span> pip3 pip312</span></code></pre>
   </div>
   <p>
    Hmm, I don’t think this needed.
   </p>
   <p>
    And so, we move forward: in accordance with the Standard Ebooks
step-by-step documentation:
   </p>
   <div class="sourceCode" id="cb3">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> install standardebooks</span></code></pre>
   </div>
   <p>
    I receive a warning:
   </p>
   <div class="sourceCode" id="cb4">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Note:</span> <span class="st">'/Users/o/.local/bin'</span> is not on your PATH environment variable. These apps will not be globally accessible until your PATH is updated. Run <span class="kw">`</span><span class="ex">pipx</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ensurepath</span><span class="kw">`</span> to automatically add it, or manually modify your PATH in your shell<span class="st">'s config file (e.g. ~/.bashrc).</span></span></code></pre>
   </div>
   <p>
    Seems reasonable:
   </p>
   <div class="sourceCode" id="cb5">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> ensurepath</span></code></pre>
   </div>
   <p>
    Source (i.e., update?) my shell’s config file:
   </p>
   <div class="sourceCode" id="cb6">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre>
   </div>
   <p>
    Can’t hurt to install the <code>pipx</code> shell completions per the
tip after running <code>pipx ensurepath</code>:
   </p>
   <div class="sourceCode" id="cb7">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> completions</span></code></pre>
   </div>
   <p>
    Add <code>eval "$(register-python-argcomplete pipx)"</code> to my
shell config.
   </p>
   <p>
    Error on <code>source source ~/.bashrc</code>:
   </p>
   <div class="sourceCode" id="cb8">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">-bash:</span> register-python-argcomplete: command not found</span></code></pre>
   </div>
   <p>
    Fair enough, as mentioned in the <code>pipx completions</code>
notes:
   </p>
   <div class="sourceCode" id="cb9">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> install argcomplete</span></code></pre>
   </div>
   <p>
    Notes after running command:
   </p>
   <div class="sourceCode" id="cb10">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>  <span class="ex">These</span> apps are now globally available</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> activate-global-python-argcomplete</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> python-argcomplete-check-easy-install-script</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> register-python-argcomplete</span></code></pre>
   </div>
   <p>
    I guess <code>argcomplete</code> and <code>py312-argcomplete</code>
(the dependency of <code>pipx</code>) are not the same.
   </p>
   <p>
    Back to the documentation:
   </p>
   <div class="sourceCode" id="cb11">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">se</span> <span class="at">--version</span></span></code></pre>
   </div>
   <p>
    Bad luck. I get an error:
   </p>
   <div class="sourceCode" id="cb12">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"/Users/o/.local/bin/se"</span>, line 8, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">sys.exit</span><span class="er">(</span><span class="fu">main()</span><span class="kw">)</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>             <span class="ex">^^^^^^</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"/Users/o/.local/pipx/venvs/standardebooks/lib/python3.12/site-packages/se/main.py"</span>, line 37, in main</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">module</span> = importlib.import_module<span class="er">(</span><span class="st">"se.commands.version"</span><span class="kw">)</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>             <span class="ex">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"/opt/local/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/importlib/__init__.py"</span>, line 90, in import_module</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ex">_bootstrap._gcd_import</span><span class="er">(</span><span class="va">name</span><span class="op">[</span>level:<span class="op">]</span><span class="ex">,</span> package, level<span class="kw">)</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>           <span class="ex">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"&lt;frozen importlib._bootstrap&gt;"</span>, line 1387, in _gcd_import</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"&lt;frozen importlib._bootstrap&gt;"</span>, line 1360, in _find_and_load</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"&lt;frozen importlib._bootstrap&gt;"</span>, line 1331, in _find_and_load_unlocked</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"&lt;frozen importlib._bootstrap&gt;"</span>, line 935, in _load_unlocked</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"&lt;frozen importlib._bootstrap_external&gt;"</span>, line 995, in exec_module</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"&lt;frozen importlib._bootstrap&gt;"</span>, line 488, in _call_with_frames_removed</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"/Users/o/.local/pipx/venvs/standardebooks/lib/python3.12/site-packages/se/commands/version.py"</span>, line 8, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="ex">import</span> pkg_resources</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="ex">ModuleNotFoundError:</span> No module named <span class="st">'pkg_resources'</span></span></code></pre>
   </div>
   <p>
    Ended googling `“ModuleNotFoundError: No module named
‘pkg_resources’” “standardebooks” and <a href="https://groups.google.com/g/standardebooks/c/ZKX-XNWNLlM">came
across a solution on the Standard Ebooks mailing list itself</a> posted
a little under two months ago:
   </p>
   <div class="sourceCode" id="cb13">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pipx</span> inject standardebooks setuptools</span></code></pre>
   </div>
   <p>
    Verify:
   </p>
   <div class="sourceCode" id="cb14">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">se</span> <span class="at">--version</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">2.6.1</span></span></code></pre>
   </div>
   <p>
    Phew!
   </p>
  </main>
  <footer>
   <p>
    “Every word was once a poem. Every new relation is a new word.”<br>– Ralph Waldo Emerson, <a href="https://www.gutenberg.org/files/2945/2945-h/2945-h.htm#link2H_4_0001">“The Poet”</a>
   </p>
  </footer>
 </body>
</html>
